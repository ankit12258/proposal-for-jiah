<!DOCTYPE html>
<html>
<head>
    <title>Will You Marry Me? ğŸ’</title>
    <style>
        /* Your existing styles */
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background: #ffebee;
            padding: 20px;
            overflow: hidden;
        }
        /* ... (keep other styles) ... */
    </style>
</head>
<body>
    <!-- Your existing content -->
    <h1>Will you be my forever? ğŸ’</h1>
    <div class="buttons">
        <button id="yesBtn">YES! ğŸ˜</button>
        <button id="noBtn">No ğŸ˜œ</button>
    </div>

    <!-- ===== FOOLPROOF MUSIC SOLUTION ===== -->
    <!-- Option 1: AudioTang (direct streaming) -->
    <audio id="proposalSong" crossorigin="anonymous">
        <source src="https://stream.audiotang.com/9c2q3/perfect.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Option 2: SoundCloud fallback -->
    <iframe id="scPlayer" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/347294491&auto_play=false" 
            style="display:none"></iframe>

    <!-- Option 3: YouTube ultimate fallback -->
    <iframe id="ytPlayer" src="https://www.youtube.com/embed/2Vv-BfVoq4g?enablejsapi=1&autoplay=0"
            style="display:none"></iframe>

    <script>
        // 1. PLAY MUSIC FUNCTION
        function playSong() {
            const audio = document.getElementById('proposalSong');
            
            // Try direct MP3 first
            audio.play().catch(e => {
                console.log("Trying SoundCloud...");
                document.getElementById('scPlayer').src += "&auto_play=true";
                document.getElementById('scPlayer').style.display = 'block';
            });
        }

        // 2. MOBILE COMPATIBILITY FIX
        let audioEnabled = false;
        function enableAudio() {
            if (!audioEnabled) {
                audioEnabled = true;
                // Initialize audio
                const audio = document.getElementById('proposalSong');
                audio.volume = 0.7;
                audio.play().then(() => audio.pause());
            }
        }

        // 3. SETUP EVENT LISTENERS
        document.getElementById('yesBtn').addEventListener('click', function() {
            if (!audioEnabled) {
                alert("Please tap the screen first to enable music!");
                return;
            }
            
            playSong();
            
            // Your celebration code
            document.body.innerHTML = `
                <h1 style="margin-top:20vh">She said YES! ğŸ’˜</h1>
                <p>"Darling, you look perfect tonight"</p>
                <div style="margin-top:30px;font-size:24px;">
                    ğŸ’ Will you marry me? ğŸ’
                </div>
            `;
        });

        // Enable audio on any touch
        document.addEventListener('click', enableAudio);
        document.addEventListener('touchstart', enableAudio);
    </script>
</body>
</html>
