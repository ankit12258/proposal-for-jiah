<!DOCTYPE html>
<html>
<head>
    <title>Will You Marry Me? üíç</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background: #ffebee;
            padding: 20px;
            overflow: hidden;
        }
        /* ... (keep all your existing styles) ... */
    </style>
</head>
<body>
    <!-- ... (keep all your existing HTML) ... -->

    <!-- AUDIO HINT FOR MOBILE USERS -->
    <p id="audioHint" style="color:#e91e63; display:none; margin-bottom: 20px;">
       üîä Tap anywhere to enable music!
    </p>
    <script>
       // Show hint if on mobile
       if (/iPhone|iPad|Android/i.test(navigator.userAgent)) {
           document.getElementById('audioHint').style.display = 'block';
       }
    </script>

    <!-- MUSIC PLAYER WITH 3 FALLBACK OPTIONS -->
    <audio id="perfectSong" preload="auto">
        <!-- 1. Primary: Your Google Drive MP3 -->
        <source src="https://drive.google.com/uc?export=download&id=1-2XrK75izqGlI_f8wSWIOhQkqHVIC7Vw" type="audio/mpeg">
        
        <!-- 2. Secondary: Direct MP3 Host -->
        <source src="https://YOUR_ALTERNATE_MP3_LINK.mp3" type="audio/mpeg">
        
        <!-- 3. Fallback: YouTube Audio -->
        <iframe id="ytAudio" style="display:none" 
                src="https://www.youtube.com/embed/2Vv-BfVoq4g?autoplay=1&enablejsapi=1" 
                frameborder="0" allow="autoplay"></iframe>
    </audio>

    <script>
        // 1. INITIALIZE AUDIO ==================================
        const song = document.getElementById('perfectSong');
        song.volume = 0.5;
        
        // 2. MOBILE AUDIO UNLOCK ===============================
        let audioUnlocked = false;
        const unlockAudio = () => {
            if (!audioUnlocked) {
                audioUnlocked = true;
                // Hide the hint once audio is unlocked
                document.getElementById('audioHint').style.display = 'none';
                // Play/pause to activate audio
                song.play().then(() => song.pause()).catch(e => {
                    console.log("Using YouTube fallback");
                    document.getElementById('ytAudio').style.display = 'block';
                });
            }
        };
        
        // 3. PLAY WHEN "YES" CLICKED ==========================
        document.getElementById('yesBtn').addEventListener('click', () => {
            // Try HTML5 Audio first
            song.play().catch(e => {
                // Fallback to YouTube if HTML5 fails
                const ytFrame = document.getElementById('ytAudio');
                ytFrame.contentWindow.postMessage(
                    '{"event":"command","func":"playVideo","args":""}', '*'
                );
            });
            
            // ... (rest of your celebration code) ...
        });

        // 4. ENABLE AUDIO ON ANY INTERACTION ==================
        ['click', 'touchstart', 'keydown'].forEach(event => {
            document.body.addEventListener(event, unlockAudio, { once: true });
        });
    </script>
</body>
</html>
